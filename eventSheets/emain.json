{
	"name": "eMain",
	"events": [
		{
			"eventType": "variable",
			"name": "tileSize",
			"type": "number",
			"initialValue": "32",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 350128101988630
		},
		{
			"eventType": "variable",
			"name": "numRooms",
			"type": "number",
			"initialValue": "5",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 427672542856966
		},
		{
			"eventType": "variable",
			"name": "dungeonWidth",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 163982840860369
		},
		{
			"eventType": "variable",
			"name": "dungeonHeight",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 635318649232828
		},
		{
			"eventType": "variable",
			"name": "lives",
			"type": "number",
			"initialValue": "3",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 762064108081304
		},
		{
			"eventType": "variable",
			"name": "level",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 380194303954685
		},
		{
			"eventType": "variable",
			"name": "gold",
			"type": "number",
			"initialValue": "10",
			"comment": "gold obtained from monsters ",
			"isStatic": false,
			"isConstant": false,
			"sid": 978182066114555
		},
		{
			"eventType": "variable",
			"name": "weaponupgrade",
			"type": "number",
			"initialValue": "0",
			"comment": "number of weapon upgrades purchased by player",
			"isStatic": false,
			"isConstant": false,
			"sid": 279455121948067
		},
		{
			"eventType": "variable",
			"name": "midAttack",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 788583315886198
		},
		{
			"eventType": "variable",
			"name": "hasKey",
			"type": "boolean",
			"initialValue": "false",
			"comment": "has the player picked up the key yet",
			"isStatic": false,
			"isConstant": false,
			"sid": 859000053069333
		},
		{
			"eventType": "variable",
			"name": "numEnemies",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 872612591949011
		},
		{
			"eventType": "variable",
			"name": "maxEnemies",
			"type": "number",
			"initialValue": "8",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 207874646804102
		},
		{
			"eventType": "variable",
			"name": "attackAngle",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 635947840900529
		},
		{
			"eventType": "variable",
			"name": "playerAttackDamage",
			"type": "number",
			"initialValue": "10",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 745505678995156
		},
		{
			"eventType": "variable",
			"name": "speedupgrade",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 856352013195307
		},
		{
			"eventType": "variable",
			"name": "rangednum",
			"type": "number",
			"initialValue": "0",
			"comment": "number left to use a ranged weapon",
			"isStatic": false,
			"isConstant": false,
			"sid": 175554129401256
		},
		{
			"eventType": "variable",
			"name": "weaponMode",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 965995107706723
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Generate Dungeon",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "GenerateRooms",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 773266258904856,
					"children": [
						{
							"eventType": "comment",
							"text": "Create rooms"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 368812006402975,
									"parameters": {
										"name": "\"LoopRoom\"",
										"start-index": "1",
										"end-index": "numRooms"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 856600158226023,
									"parameters": {
										"object-to-create": "Room",
										"layer": "0",
										"x": "0",
										"y": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Room",
									"sid": 342049123782616,
									"parameters": {
										"instance-variable": "ID",
										"value": "loopindex(\"LoopRoom\")"
									}
								},
								{
									"id": "set-size",
									"objectClass": "Room",
									"sid": 406624274127899,
									"parameters": {
										"width": "round(int(random( 4, 12) * tileSize)/64) * 64 +32",
										"height": "round(int(random( 4, 12) * tileSize)/64) * 64+32"
									}
								},
								{
									"id": "set-position",
									"objectClass": "Room",
									"sid": 536983302837316,
									"parameters": {
										"x": "round(random(tileSize * 8, LayoutWidth - tileSize * 8)/32)*32+16",
										"y": "round(random(tileSize * 8, LayoutHeight - tileSize * 8)/32)*32+16"
									}
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Room",
									"sid": 748884293527903,
									"parameters": {
										"object": "RoomCenter",
										"layer": "0",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "RoomCenter",
									"sid": 895721680894170,
									"parameters": {
										"instance-variable": "ID",
										"value": "Room.ID "
									}
								}
							],
							"sid": 138119216644804,
							"children": [
								{
									"eventType": "comment",
									"text": "Change the ID of this RoomCenter only, so that the last Room will connect back here"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "RoomCenter",
											"sid": 538981857827286,
											"parameters": {
												"instance-variable": "ID",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "RoomCenter",
											"sid": 975105891955423,
											"parameters": {
												"instance-variable": "ID",
												"value": "10"
											}
										}
									],
									"sid": 698049410688935
								}
							]
						}
					]
				},
				{
					"functionName": "GenerateHallways",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 614751092530763,
					"children": [
						{
							"eventType": "comment",
							"text": "Horizontal Hallways"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 530193475684164,
									"parameters": {
										"object": "Room"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Room",
									"sid": 631181277633145,
									"parameters": {
										"object": "Hall",
										"layer": "0",
										"image-point": "0",
										"create-hierarchy": false
									}
								}
							],
							"sid": 700966666015961,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "RoomCenter",
											"sid": 279660043178782,
											"parameters": {
												"instance-variable": "ID",
												"comparison": 0,
												"value": "Room.ID + 1"
											}
										}
									],
									"actions": [
										{
											"id": "set-size",
											"objectClass": "Hall",
											"sid": 447709051135867,
											"parameters": {
												"width": "abs( RoomCenter.X - Room.X ) + 32",
												"height": "32"
											}
										},
										{
											"id": "set-position",
											"objectClass": "Hall",
											"sid": 660129642658016,
											"parameters": {
												"x": "( Room.X + RoomCenter.X ) / 2",
												"y": "Room.Y"
											}
										}
									],
									"sid": 705314233115621
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Vertical Hallways"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 980013807773518,
									"parameters": {
										"object": "Room"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Room",
									"sid": 538604310201536,
									"parameters": {
										"object": "Hall",
										"layer": "0",
										"image-point": "0",
										"create-hierarchy": false
									}
								}
							],
							"sid": 195222100450547,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "RoomCenter",
											"sid": 236354305106715,
											"parameters": {
												"instance-variable": "ID",
												"comparison": 0,
												"value": "Room.ID + 1"
											}
										}
									],
									"actions": [
										{
											"id": "set-size",
											"objectClass": "Hall",
											"sid": 515221482919667,
											"parameters": {
												"width": "32",
												"height": "abs( Room.Y - RoomCenter.Y ) +32"
											}
										},
										{
											"id": "set-position",
											"objectClass": "Hall",
											"sid": 921076394139082,
											"parameters": {
												"x": "RoomCenter.X",
												"y": "( RoomCenter.Y + Room.Y ) / 2"
											}
										}
									],
									"sid": 759825907069261
								}
							]
						}
					]
				},
				{
					"functionName": "GenerateBorders",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 755684582329922,
					"children": [
						{
							"eventType": "comment",
							"text": "Room Borders"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 704898665825448,
									"parameters": {
										"object": "Room"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Room",
									"sid": 777926125348609,
									"parameters": {
										"object": "Border",
										"layer": "0",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-size",
									"objectClass": "Border",
									"sid": 505442049043653,
									"parameters": {
										"width": "Room.Width + 64",
										"height": "Room.Height + 64"
									}
								}
							],
							"sid": 274526860153831
						},
						{
							"eventType": "comment",
							"text": "Hall Borders"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 420230137881058,
									"parameters": {
										"object": "Hall"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Hall",
									"sid": 480253951965402,
									"parameters": {
										"object": "Border",
										"layer": "0",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-size",
									"objectClass": "Border",
									"sid": 436681349404609,
									"parameters": {
										"width": "Hall.Width + 64",
										"height": "Hall.Height + 64"
									}
								}
							],
							"sid": 659778707820346
						}
					]
				},
				{
					"functionName": "GenerateDungeon",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "GenerateRooms",
							"sid": 405014189812970
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 719569721677463,
							"parameters": {
								"seconds": "0"
							}
						},
						{
							"callFunction": "GenerateHallways",
							"sid": 466876334045247
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 852121700852469,
							"parameters": {
								"seconds": "0"
							}
						},
						{
							"callFunction": "GenerateBorders",
							"sid": 385940619101998
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 594760851826816,
							"parameters": {
								"tag": "\"DG Complete\""
							}
						}
					],
					"sid": 902518176651406,
					"children": [
						{
							"eventType": "comment",
							"text": "Set Positions"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 518162884560385,
									"parameters": {
										"object": "Room"
									}
								}
							],
							"actions": [],
							"sid": 331893833904425,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 981841025611552,
											"parameters": {
												"object": "Room",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "Player",
											"sid": 451647051005556,
											"parameters": {
												"x": "Room.X - 48",
												"y": "Room.Y"
											}
										}
									],
									"sid": 625287225801281
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 551763946393112,
									"parameters": {
										"object": "Room"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 900373464437868,
									"parameters": {
										"object-to-create": "TrapDoor",
										"layer": "0",
										"x": "Room.X",
										"y": "Room.Y",
										"create-hierarchy": false
									}
								}
							],
							"sid": 934098695541806
						}
					]
				},
				{
					"functionName": "SpawnEnemy",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 939145798127467,
					"children": [
						{
							"eventType": "variable",
							"name": "r",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 102698498219984
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 331586206369292,
									"parameters": {
										"object": "Room"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 267731576485926,
									"parameters": {
										"variable": "r",
										"value": "choose(1,2)"
									}
								}
							],
							"sid": 962745255111993,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 445277839874119,
											"parameters": {
												"object": "Room",
												"instance": "int(random(2, numRooms-1))"
											}
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "TempTile",
											"sid": 593897937924960,
											"parameters": {
												"x": "random(Room.X-Room.Width/2+32, Room.X+Room.Width/2-32)",
												"y": "random(Room.Y-Room.Height/2+32, Room.Y+Room.Height/2-32)"
											}
										}
									],
									"sid": 474734489576836,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 792871811358930,
													"parameters": {
														"first-value": "r",
														"comparison": 0,
														"second-value": "1"
													}
												},
												{
													"id": "is-overlapping-another-object",
													"objectClass": "TempTile",
													"sid": 802092922195703,
													"parameters": {
														"object": "EnemyFam"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 780196507727103,
													"parameters": {
														"object-to-create": "bouncingSkull",
														"layer": "1",
														"x": "TempTile.X",
														"y": "TempTile.Y",
														"create-hierarchy": false
													}
												},
												{
													"id": "set-speed",
													"objectClass": "bouncingSkull",
													"sid": 826044720035824,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "100*(1+0.1*level)"
													}
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "bouncingSkull",
													"sid": 604567781687159,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "random(0,360)"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 325112498813365,
													"parameters": {
														"variable": "numEnemies",
														"value": "1"
													}
												},
												{
													"id": "signal",
													"objectClass": "System",
													"sid": 875203983680800,
													"parameters": {
														"tag": "\"Spawn Done\""
													}
												}
											],
											"sid": 165257156787342
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 321665749268864,
													"parameters": {
														"first-value": "r",
														"comparison": 0,
														"second-value": "2"
													}
												},
												{
													"id": "is-overlapping-another-object",
													"objectClass": "TempTile",
													"sid": 120523585794880,
													"parameters": {
														"object": "EnemyFam"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 352891493763118,
													"parameters": {
														"object-to-create": "Skeleton",
														"layer": "1",
														"x": "TempTile.X",
														"y": "TempTile.Y",
														"create-hierarchy": false
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 213593198756371,
													"parameters": {
														"variable": "numEnemies",
														"value": "1"
													}
												},
												{
													"id": "signal",
													"objectClass": "System",
													"sid": 960400166095545,
													"parameters": {
														"tag": "\"Spawn Done\""
													}
												}
											],
											"sid": 633905234965963
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 377137962723341
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Fill Tilemap",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "FillTilemap",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 774248673773741,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 934194661943470,
									"parameters": {
										"object": "Room"
									}
								}
							],
							"actions": [],
							"sid": 495767950840766,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 740894791215269,
											"parameters": {
												"name": "\"i\"",
												"start-index": "Room.X/tileSize - ((Room.Width/tileSize)/2)",
												"end-index": "Room.X/tileSize + ((Room.Width/tileSize)/2) -1"
											}
										}
									],
									"actions": [],
									"sid": 671125081798336,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 767636733563559,
													"parameters": {
														"name": "\"j\"",
														"start-index": "Room.Y/tileSize - ((Room.Height/tileSize)/2)",
														"end-index": "Room.Y/tileSize + ((Room.Height/tileSize)/2) -1"
													}
												}
											],
											"actions": [
												{
													"id": "set-tile",
													"objectClass": "Tilemap",
													"sid": 765536633118671,
													"parameters": {
														"tile-x": "loopindex(\"i\")",
														"tile-y": "loopindex(\"j\")",
														"tile": "choose(6,7,8,9,16,17,18,19,26,27,28,29)",
														"state": "normal"
													}
												}
											],
											"sid": 232926839881976
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 273105420771189,
									"parameters": {
										"object": "Border"
									}
								}
							],
							"actions": [],
							"sid": 269416606972423,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 319084446474403,
											"parameters": {
												"name": "\"i\"",
												"start-index": "Border.X/tileSize - ((Border.Width/tileSize)/2)",
												"end-index": "Border.X/tileSize + ((Border.Width/tileSize)/2) -1"
											}
										}
									],
									"actions": [],
									"sid": 799260711345191,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 863875395412617,
													"parameters": {
														"name": "\"j\"",
														"start-index": "Border.Y/tileSize - ((Border.Height/tileSize)/2)",
														"end-index": "Border.Y/tileSize + ((Border.Height/tileSize)/2) -1"
													}
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "TempTile",
													"sid": 845841279232960,
													"parameters": {
														"x": "loopindex(\"i\")*tileSize + tileSize/2",
														"y": "loopindex(\"j\")*tileSize + tileSize/2"
													}
												}
											],
											"sid": 988132669197395,
											"children": [
												{
													"eventType": "comment",
													"text": "Left wall tiles"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 987966441733023,
															"parameters": {
																"first-value": "loopindex(\"i\")",
																"comparison": 0,
																"second-value": "Border.X/tileSize - ((Border.Width/tileSize)/2)"
															}
														}
													],
													"actions": [],
													"sid": 220069189869057,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 440191915416474,
																	"parameters": {
																		"first-value": "TilemapSolid.TileAt(loopindex(\"i\"), loopindex(\"j\"))",
																		"comparison": 0,
																		"second-value": "-1"
																	}
																},
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 650458606448599,
																	"parameters": {
																		"first-value": "TilemapSolid.TileAt(loopindex(\"i\"), loopindex(\"j\"))",
																		"comparison": 0,
																		"second-value": "40"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TilemapSolid",
																	"sid": 891913517919696,
																	"parameters": {
																		"tile-x": "loopindex(\"i\")",
																		"tile-y": "loopindex(\"j\")",
																		"tile": "choose(0,10,20,30)",
																		"state": "normal"
																	}
																}
															],
															"sid": 774500302071595,
															"isOrBlock": true
														}
													]
												},
												{
													"eventType": "comment",
													"text": "Right wall tiles"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 706398437909801,
															"parameters": {
																"first-value": "loopindex(\"i\")",
																"comparison": 0,
																"second-value": "Border.X/tileSize + ((Border.Width/tileSize)/2) -1"
															}
														}
													],
													"actions": [],
													"sid": 168069730718257,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 173899502687862,
																	"parameters": {
																		"first-value": "TilemapSolid.TileAt(loopindex(\"i\"), loopindex(\"j\"))",
																		"comparison": 0,
																		"second-value": "-1"
																	}
																},
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 408009652937777,
																	"parameters": {
																		"first-value": "TilemapSolid.TileAt(loopindex(\"i\"), loopindex(\"j\"))",
																		"comparison": 0,
																		"second-value": "45"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TilemapSolid",
																	"sid": 960879874799852,
																	"parameters": {
																		"tile-x": "loopindex(\"i\")",
																		"tile-y": "loopindex(\"j\")",
																		"tile": "choose(5,15,25,35)",
																		"state": "normal"
																	}
																}
															],
															"sid": 918396156506758,
															"isOrBlock": true
														}
													]
												},
												{
													"eventType": "comment",
													"text": "Top wall tiles"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 252698273672483,
															"parameters": {
																"first-value": "loopindex(\"j\")",
																"comparison": 0,
																"second-value": "Border.Y/tileSize - ((Border.Height/tileSize)/2)"
															}
														}
													],
													"actions": [],
													"sid": 151475212610011,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 497188221045088,
																	"parameters": {
																		"first-value": "loopindex(\"i\")",
																		"comparison": 1,
																		"second-value": "Border.X/tileSize - ((Border.Width/tileSize)/2)"
																	}
																},
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 411798140594261,
																	"parameters": {
																		"first-value": "loopindex(\"i\")",
																		"comparison": 1,
																		"second-value": "Border.X/tileSize + ((Border.Width/tileSize)/2) -1"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TilemapSolid",
																	"sid": 834674646787541,
																	"parameters": {
																		"tile-x": "loopindex(\"i\")",
																		"tile-y": "loopindex(\"j\")",
																		"tile": "choose(1,2,3,4)",
																		"state": "normal"
																	}
																}
															],
															"sid": 593885769686595
														}
													]
												},
												{
													"eventType": "comment",
													"text": "Bottom wall tiles"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 582411500845877,
															"parameters": {
																"first-value": "loopindex(\"j\")",
																"comparison": 0,
																"second-value": "Border.Y/tileSize + ((Border.Height/tileSize)/2) -1"
															}
														}
													],
													"actions": [],
													"sid": 160843205194361,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 708675771944240,
																	"parameters": {
																		"first-value": "loopindex(\"i\")",
																		"comparison": 0,
																		"second-value": "Border.X/tileSize - ((Border.Width/tileSize)/2)"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TilemapSolid",
																	"sid": 359065478844130,
																	"parameters": {
																		"tile-x": "loopindex(\"i\")",
																		"tile-y": "loopindex(\"j\")",
																		"tile": "40",
																		"state": "normal"
																	}
																}
															],
															"sid": 735571531432726
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 144954919579592,
																	"parameters": {
																		"first-value": "loopindex(\"i\")",
																		"comparison": 0,
																		"second-value": "Border.X/tileSize + ((Border.Width/tileSize)/2) -1"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TilemapSolid",
																	"sid": 258506473180964,
																	"parameters": {
																		"tile-x": "loopindex(\"i\")",
																		"tile-y": "loopindex(\"j\")",
																		"tile": "45",
																		"state": "normal"
																	}
																}
															],
															"sid": 949988089076784
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 761005884040186,
																	"parameters": {
																		"first-value": "loopindex(\"i\")",
																		"comparison": 1,
																		"second-value": "Border.X/tileSize - ((Border.Width/tileSize)/2)"
																	}
																},
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 572756346560653,
																	"parameters": {
																		"first-value": "loopindex(\"i\")",
																		"comparison": 1,
																		"second-value": "Border.X/tileSize + ((Border.Width/tileSize)/2) -1"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TilemapSolid",
																	"sid": 202335613270153,
																	"parameters": {
																		"tile-x": "loopindex(\"i\")",
																		"tile-y": "loopindex(\"j\")",
																		"tile": "choose(41,42,43,44,51,52)",
																		"state": "normal"
																	}
																}
															],
															"sid": 426509423017523
														}
													]
												},
												{
													"eventType": "comment",
													"text": "Erase room and hall colliding tiles"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-overlapping-point",
															"objectClass": "System",
															"sid": 513338366696944,
															"parameters": {
																"object": "Hall",
																"x": "loopindex(\"i\")*32 + 16",
																"y": "loopindex(\"j\")*32 + 16"
															}
														},
														{
															"id": "pick-overlapping-point",
															"objectClass": "System",
															"sid": 502022860659353,
															"parameters": {
																"object": "Room",
																"x": "loopindex(\"i\")*32 + 16",
																"y": "loopindex(\"j\")*32 + 16"
															}
														}
													],
													"actions": [
														{
															"id": "erase-tile",
															"objectClass": "TilemapSolid",
															"sid": 932068313342925,
															"parameters": {
																"tile-x": "loopindex(\"i\")",
																"tile-y": "loopindex(\"j\")"
															}
														}
													],
													"sid": 945886450120287,
													"isOrBlock": true
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 842473596758400,
									"parameters": {
										"object": "Hall"
									}
								}
							],
							"actions": [],
							"sid": 705838001138779,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 437724587359656,
											"parameters": {
												"name": "\"i\"",
												"start-index": "Hall.X/tileSize - ((Hall.Width/tileSize)/2)",
												"end-index": "Hall.X/tileSize + ((Hall.Width/tileSize)/2) -1"
											}
										}
									],
									"actions": [],
									"sid": 973185021103702,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 643113227034518,
													"parameters": {
														"name": "\"j\"",
														"start-index": "Hall.Y/tileSize - ((Hall.Height/tileSize)/2)",
														"end-index": "Hall.Y/tileSize + ((Hall.Height/tileSize)/2) -1"
													}
												}
											],
											"actions": [
												{
													"id": "set-tile",
													"objectClass": "Tilemap",
													"sid": 328335437706838,
													"parameters": {
														"tile-x": "loopindex(\"i\")",
														"tile-y": "loopindex(\"j\")",
														"tile": "choose(6,7,8,9,16,17,18,19,26,27,28,29)",
														"state": "normal"
													}
												},
												{
													"id": "set-position",
													"objectClass": "TempTile",
													"sid": 561847769799086,
													"parameters": {
														"x": "loopindex(\"i\")*tileSize + tileSize/2",
														"y": "loopindex(\"j\")*tileSize + tileSize/2"
													}
												}
											],
											"sid": 524691863197522,
											"children": [
												{
													"eventType": "comment",
													"text": "Corner tiles that connect to halls"
												},
												{
													"eventType": "variable",
													"name": "count",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 470717338035684
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-width",
															"objectClass": "Hall",
															"sid": 119634170298656,
															"parameters": {
																"comparison": 4,
																"width": "tileSize"
															}
														}
													],
													"actions": [],
													"sid": 821475560448969,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 991104171980664,
																	"parameters": {
																		"object": "Border",
																		"offset-x": "0",
																		"offset-y": "32"
																	}
																},
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 124027257375389,
																	"parameters": {
																		"object": "Room",
																		"offset-x": "-32",
																		"offset-y": "0"
																	}
																},
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 281479060364977,
																	"parameters": {
																		"object": "Room",
																		"offset-x": "0",
																		"offset-y": "0"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 549787715155490,
																	"parameters": {
																		"variable": "count",
																		"value": "Border.PickedCount"
																	}
																}
															],
															"sid": 824534523963079,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-eventvar",
																			"objectClass": "System",
																			"sid": 526379758253255,
																			"parameters": {
																				"variable": "count",
																				"comparison": 0,
																				"value": "2"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-tile",
																			"objectClass": "TilemapSolid",
																			"sid": 694434322638547,
																			"parameters": {
																				"tile-x": "loopindex(\"i\")",
																				"tile-y": "loopindex(\"j\")+1",
																				"tile": "50",
																				"state": "normal"
																			}
																		}
																	],
																	"sid": 102622549504163
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 241188970914128,
																	"parameters": {
																		"object": "Border",
																		"offset-x": "0",
																		"offset-y": "32"
																	}
																},
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 131189721238340,
																	"parameters": {
																		"object": "Room",
																		"offset-x": "32",
																		"offset-y": "0"
																	}
																},
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 589462706475252,
																	"parameters": {
																		"object": "Room",
																		"offset-x": "0",
																		"offset-y": "0"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 740400552294665,
																	"parameters": {
																		"variable": "count",
																		"value": "Border.PickedCount"
																	}
																}
															],
															"sid": 314829247826687,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-eventvar",
																			"objectClass": "System",
																			"sid": 976142164374677,
																			"parameters": {
																				"variable": "count",
																				"comparison": 0,
																				"value": "2"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-tile",
																			"objectClass": "TilemapSolid",
																			"sid": 715148660840324,
																			"parameters": {
																				"tile-x": "loopindex(\"i\")",
																				"tile-y": "loopindex(\"j\")+1",
																				"tile": "53",
																				"state": "normal"
																			}
																		}
																	],
																	"sid": 929652780989490
																}
															]
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-height",
															"objectClass": "Hall",
															"sid": 331614769408013,
															"parameters": {
																"comparison": 4,
																"height": "tileSize"
															}
														}
													],
													"actions": [],
													"sid": 220506009342674,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 303837717171233,
																	"parameters": {
																		"object": "Border",
																		"offset-x": "32",
																		"offset-y": "0"
																	}
																},
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 854891964882240,
																	"parameters": {
																		"object": "Room",
																		"offset-x": "0",
																		"offset-y": "-32"
																	}
																},
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 893333148392758,
																	"parameters": {
																		"object": "Room",
																		"offset-x": "0",
																		"offset-y": "0"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 743760012902702,
																	"parameters": {
																		"variable": "count",
																		"value": "Border.PickedCount"
																	}
																}
															],
															"sid": 114199682736195,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-eventvar",
																			"objectClass": "System",
																			"sid": 535252547678785,
																			"parameters": {
																				"variable": "count",
																				"comparison": 4,
																				"value": "1"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-tile",
																			"objectClass": "TilemapSolid",
																			"sid": 444034692879262,
																			"parameters": {
																				"tile-x": "loopindex(\"i\")+1",
																				"tile-y": "loopindex(\"j\")",
																				"tile": "50",
																				"state": "normal"
																			}
																		}
																	],
																	"sid": 431761090350037
																}
															]
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 276460405385467,
																	"parameters": {
																		"object": "Border",
																		"offset-x": "-32",
																		"offset-y": "0"
																	}
																},
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 420234406784712,
																	"parameters": {
																		"object": "Room",
																		"offset-x": "0",
																		"offset-y": "-32"
																	}
																},
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "TempTile",
																	"sid": 844302148146018,
																	"parameters": {
																		"object": "Room",
																		"offset-x": "0",
																		"offset-y": "0"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 774347472969538,
																	"parameters": {
																		"variable": "count",
																		"value": "Border.PickedCount"
																	}
																}
															],
															"sid": 263246108972926,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-eventvar",
																			"objectClass": "System",
																			"sid": 228735478558475,
																			"parameters": {
																				"variable": "count",
																				"comparison": 4,
																				"value": "1"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-tile",
																			"objectClass": "TilemapSolid",
																			"sid": 531039535144944,
																			"parameters": {
																				"tile-x": "loopindex(\"i\")-1",
																				"tile-y": "loopindex(\"j\")",
																				"tile": "53",
																				"state": "normal"
																			}
																		}
																	],
																	"sid": 286546346778541
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 290232839635741
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Set layouts and other system conditions",
			"description": "Call dungeon generation and set up each layout. Also check for lose condition",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 579049936687902
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "lifeCount",
							"sid": 374163857261974,
							"parameters": {
								"text": "lives"
							}
						},
						{
							"id": "set-text",
							"objectClass": "goldCount",
							"sid": 368764584300143,
							"parameters": {
								"text": "gold"
							}
						},
						{
							"id": "set-text",
							"objectClass": "modeIndi",
							"sid": 272816336586122,
							"parameters": {
								"text": "weaponMode"
							}
						}
					],
					"sid": 767623960370591
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 740413570183520
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 616834412815379,
							"parameters": {
								"variable": "hasKey",
								"value": "false"
							}
						},
						{
							"id": "set-text",
							"objectClass": "levelCount",
							"sid": 869365221301234,
							"parameters": {
								"text": "level"
							}
						},
						{
							"id": "set-size",
							"objectClass": "upSlash",
							"sid": 839284564367350,
							"parameters": {
								"width": "upSlash.Width+10*weaponupgrade",
								"height": "upSlash.Height+10*weaponupgrade"
							}
						},
						{
							"id": "set-size",
							"objectClass": "leftSlash",
							"sid": 639732502643357,
							"parameters": {
								"width": "leftSlash.Width+10*weaponupgrade",
								"height": "leftSlash.Height+10*weaponupgrade"
							}
						},
						{
							"id": "set-size",
							"objectClass": "downSlash",
							"sid": 263996595588610,
							"parameters": {
								"width": "downSlash.Width+10*weaponupgrade",
								"height": "downSlash.Height+10*weaponupgrade"
							}
						},
						{
							"id": "set-size",
							"objectClass": "rightSlash",
							"sid": 282351800000292,
							"parameters": {
								"width": "rightSlash.Width+10*weaponupgrade",
								"height": "rightSlash.Height+10*weaponupgrade"
							}
						},
						{
							"id": "pin-to-object-imagepoint",
							"objectClass": "direction",
							"sid": 913685061207424,
							"behaviorType": "固定",
							"parameters": {
								"pin-to": "Player",
								"image-point": "0",
								"angle": false,
								"width-type": "no",
								"height-type": "no",
								"z": true
							}
						}
					],
					"sid": 209738281706197,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 899280800470495,
									"parameters": {
										"first-value": "LayoutName",
										"comparison": 0,
										"second-value": "\"Dungeon\""
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 726448597554314,
									"parameters": {
										"variable": "dungeonHeight",
										"value": "LayoutHeight"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 391826899951988,
									"parameters": {
										"variable": "dungeonWidth",
										"value": "LayoutWidth"
									}
								},
								{
									"callFunction": "GenerateDungeon",
									"sid": 316726722239669
								},
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 738531295519179,
									"parameters": {
										"tag": "\"DG Complete\""
									}
								},
								{
									"callFunction": "FillTilemap",
									"sid": 586731986605123
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 675852468098614,
									"parameters": {
										"object-to-create": "phasingSkull",
										"layer": "0",
										"x": "choose(-40, 2000)",
										"y": "random(100, 900)",
										"create-hierarchy": false
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 566126649198931,
									"parameters": {
										"object-to-create": "phasingSkull",
										"layer": "0",
										"x": "choose(-40, 2000)",
										"y": "random(100, 900)",
										"create-hierarchy": false
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 927679812584903,
									"parameters": {
										"object-to-create": "phasingSkull",
										"layer": "0",
										"x": "choose(-40, 2000)",
										"y": "random(100, 900)",
										"create-hierarchy": false
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 375206337212580,
									"parameters": {
										"object-to-create": "phasingSkull",
										"layer": "0",
										"x": "choose(-40, 2000)",
										"y": "random(100, 900)",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-speed",
									"objectClass": "phasingSkull",
									"sid": 323486424285125,
									"behaviorType": "Bullet",
									"parameters": {
										"speed": "230*(1+0.01*level)"
									}
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "phasingSkull",
									"sid": 485497892339167,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "random(0,360)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "temAngleText",
									"sid": 429932794171444,
									"parameters": {
										"text": "attackAngle"
									}
								}
							],
							"sid": 684018442952519,
							"children": [
								{
									"eventType": "comment",
									"text": "Spawn Enemies"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "while",
											"objectClass": "System",
											"sid": 971221303661800
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 851445437803703,
											"parameters": {
												"first-value": "numEnemies",
												"comparison": 2,
												"second-value": "maxEnemies"
											}
										}
									],
									"actions": [
										{
											"callFunction": "SpawnEnemy",
											"sid": 852015210480311
										},
										{
											"id": "wait-for-signal",
											"objectClass": "System",
											"sid": 977707677789830,
											"parameters": {
												"tag": "\"Spawn Done\""
											}
										}
									],
									"sid": 174315248701577
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 112373526922605,
											"parameters": {
												"angle": "0",
												"first-angle": "0",
												"second-angle": "45"
											}
										}
									],
									"actions": [],
									"sid": 705565809624063
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-tag-playing",
											"objectClass": "Audio",
											"sid": 699846164195970,
											"parameters": {
												"tag": "\"dungeon\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "stop-all",
											"objectClass": "Audio",
											"sid": 815415423540379
										},
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 996180015525616,
											"parameters": {
												"audio-file": "Dungeon",
												"loop": "looping",
												"volume": "-30",
												"tag-optional": "\"dungeon\""
											}
										}
									],
									"sid": 375270769032502
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 918444430044956,
									"parameters": {
										"first-value": "LayoutName",
										"comparison": 0,
										"second-value": "\"Merchant Room\""
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 393574780959888,
									"parameters": {
										"layer": "\"Shop Menu\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "stop-all",
									"objectClass": "Audio",
									"sid": 815135496284769
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 583551588243443,
									"parameters": {
										"audio-file": "Merchant",
										"loop": "looping",
										"volume": "-30",
										"tag-optional": "\"merchant\""
									}
								},
								{
									"id": "set-collisions-enabled",
									"objectClass": "merchCol",
									"sid": 589597934764634,
									"parameters": {
										"collisions": "enabled"
									}
								},
								{
									"id": "set-text",
									"objectClass": "weaponPrice",
									"sid": 527241450658527,
									"parameters": {
										"text": "5*(weaponupgrade+1)&\"g\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "speedPrice",
									"sid": 250395153791065,
									"parameters": {
										"text": "5*(speedupgrade+1)&\"g\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "potionPrice",
									"sid": 973258854348844,
									"parameters": {
										"text": "5&\"g\""
									}
								}
							],
							"sid": 795345047156647
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 668928385444511,
							"parameters": {
								"variable": "lives",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "stop-all",
							"objectClass": "Audio",
							"sid": 308975420861611,
							"disabled": true
						},
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 699906009525954
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 716083463624453
						}
					],
					"sid": 128259444735128
				}
			],
			"sid": 696096181159325
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Enemy Movement",
			"description": "Note: skull bullet speed is set at layout start",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "has-los-to-object",
							"objectClass": "Skeleton",
							"sid": 562620054216760,
							"behaviorType": "LineOfSight",
							"parameters": {
								"object": "Player",
								"image-point": "0"
							}
						}
					],
					"actions": [
						{
							"id": "move-at-angle",
							"objectClass": "Skeleton",
							"sid": 201580665374838,
							"parameters": {
								"angle": "angle(Skeleton.X, Skeleton.Y, Player.X, Player.Y)",
								"distance": "1.0+(level*0.1)"
							}
						}
					],
					"sid": 768860882957963
				}
			],
			"sid": 277427262874824
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Collisions",
			"description": "With enemies and objects",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 189596358978165,
							"parameters": {
								"object": "TrapDoor"
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 291181350772301,
							"parameters": {
								"variable": "hasKey"
							}
						}
					],
					"actions": [
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 339176400281715,
							"parameters": {
								"audio-file": "door",
								"loop": "not-looping",
								"volume": "-10",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 457427652227811,
							"parameters": {
								"object-to-create": "Ladder",
								"layer": "0",
								"x": "TrapDoor.X",
								"y": "TrapDoor.Y",
								"create-hierarchy": false
							}
						},
						{
							"id": "destroy",
							"objectClass": "TrapDoor",
							"sid": 786159713127264
						}
					],
					"sid": 461362569419112
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 760462405810371,
							"parameters": {
								"object": "Ladder"
							}
						}
					],
					"actions": [
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 466068125781442,
							"parameters": {
								"variable": "level",
								"value": "1"
							}
						}
					],
					"sid": 803428879386728,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 940438306107207,
									"parameters": {
										"first-value": "LayoutName",
										"comparison": 0,
										"second-value": "\"Merchant Room\""
									}
								}
							],
							"actions": [
								{
									"id": "go-to-layout",
									"objectClass": "System",
									"sid": 601003357025559,
									"parameters": {
										"layout": "Dungeon"
									}
								},
								{
									"id": "restart-layout",
									"objectClass": "System",
									"sid": 706662230277330
								}
							],
							"sid": 696781109345195
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 449490898869164,
									"parameters": {
										"first-value": "level%3",
										"comparison": 0,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "go-to-layout",
									"objectClass": "System",
									"sid": 964205175078020,
									"parameters": {
										"layout": "Merchant Room"
									}
								}
							],
							"sid": 577160798228580
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 788807597387195
								}
							],
							"actions": [
								{
									"id": "restart-layout",
									"objectClass": "System",
									"sid": 374999454111646
								}
							],
							"sid": 487836896466876
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 693716685431248,
							"parameters": {
								"object": "EnemyFam"
							}
						}
					],
					"actions": [
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 383992788026637,
							"parameters": {
								"audio-file": "hit",
								"loop": "not-looping",
								"volume": "-29",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 156107738562415,
							"parameters": {
								"variable": "lives",
								"value": "1"
							}
						},
						{
							"id": "set-text",
							"objectClass": "lifeCount",
							"sid": 979893507044789,
							"parameters": {
								"text": "lives"
							}
						},
						{
							"id": "shake",
							"objectClass": "Player",
							"sid": 805577608362848,
							"behaviorType": "ScrollTo",
							"parameters": {
								"magnitude": "25",
								"duration": "0.4",
								"mode": "reducing-magnitude"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "damageFlash",
							"sid": 756428429610056,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 978670671431873,
							"parameters": {
								"seconds": "0.3"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "damageFlash",
							"sid": 653702746129981,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 972828490749819
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "SlashFam",
							"sid": 169064211232411,
							"parameters": {
								"object": "EnemyFam"
							}
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "EnemyFam",
							"sid": 573125110642104,
							"parameters": {
								"object": "Coin",
								"layer": "1",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "destroy",
							"objectClass": "EnemyFam",
							"sid": 531168301458201
						},
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 980575962820601,
							"parameters": {
								"variable": "numEnemies",
								"value": "1"
							}
						}
					],
					"sid": 900159403163642,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 199731293969269,
									"parameters": {
										"variable": "hasKey"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 704347041816618,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 470609231822727,
											"parameters": {
												"first-value": "numEnemies",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "EnemyFam",
											"sid": 824650502536248,
											"parameters": {
												"object": "Key",
												"layer": "1",
												"image-point": "0",
												"create-hierarchy": false
											}
										},
										{
											"id": "move-at-angle",
											"objectClass": "Key",
											"sid": 994996374176857,
											"parameters": {
												"angle": "random(0, 360)",
												"distance": "10"
											}
										}
									],
									"sid": 124332049876704
								},
								{
									"eventType": "variable",
									"name": "r",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 889791938570655
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 867959873682729,
											"parameters": {
												"variable": "r",
												"value": "int(random(1,4))"
											}
										}
									],
									"sid": 123919135169781,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 156800401193536,
													"parameters": {
														"variable": "r",
														"comparison": 0,
														"value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "EnemyFam",
													"sid": 526616876790885,
													"parameters": {
														"object": "Key",
														"layer": "1",
														"image-point": "0",
														"create-hierarchy": false
													}
												},
												{
													"id": "move-at-angle",
													"objectClass": "Key",
													"sid": 378888979309941,
													"parameters": {
														"angle": "random(0, 360)",
														"distance": "15"
													}
												}
											],
											"sid": 896796994066623
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 639132804503896,
							"parameters": {
								"object": "Key"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Key",
							"sid": 403786970718045
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 499593205579798,
							"parameters": {
								"variable": "hasKey",
								"value": "true"
							}
						},
						{
							"id": "set-text",
							"objectClass": "keyYesNo",
							"sid": 442729131688070,
							"parameters": {
								"text": "\"YES\""
							}
						}
					],
					"sid": 849168132407838,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 772302414086678,
							"parameters": {
								"object": "Coin"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Coin",
							"sid": 260348005645722
						},
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 103738898630419,
							"parameters": {
								"audio-file": "gold",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 583391290718211,
							"parameters": {
								"variable": "gold",
								"value": "level"
							}
						},
						{
							"id": "set-text",
							"objectClass": "goldCount",
							"sid": 693774709240601,
							"parameters": {
								"text": "gold"
							}
						}
					],
					"sid": 791257277244910,
					"isOrBlock": true
				}
			],
			"sid": 561616468574223
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "playerAttacks",
			"description": "ijkl slashes :O",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 359845910655202,
							"parameters": {
								"key": 73
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 413203515358853,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"Dungeon\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 589273547864414,
							"parameters": {
								"variable": "midAttack"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 232975563210606,
							"parameters": {
								"variable": "midAttack",
								"value": "true"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 701030037671625,
							"parameters": {
								"object-to-create": "upSlash",
								"layer": "1",
								"x": "Player.X",
								"y": "Player.Y-25",
								"create-hierarchy": false
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 139306529483259,
							"parameters": {
								"seconds": "0.1"
							}
						},
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 889511393732838,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "\"slash_\"&choose(1,2)",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "destroy",
							"objectClass": "upSlash",
							"sid": 411886703174543
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 212416651107971,
							"parameters": {
								"seconds": "0.3"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 335438565404283,
							"parameters": {
								"variable": "midAttack",
								"value": "false"
							}
						}
					],
					"sid": 255474557594688
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 722692264850481,
							"parameters": {
								"key": 74
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 328349348704080,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"Dungeon\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 869390016227152,
							"parameters": {
								"variable": "midAttack"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 380876389452540,
							"parameters": {
								"variable": "midAttack",
								"value": "true"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 319368734406070,
							"parameters": {
								"object-to-create": "leftSlash",
								"layer": "1",
								"x": "Player.X-25",
								"y": "Player.Y",
								"create-hierarchy": false
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 591719786573131,
							"parameters": {
								"seconds": "0.1"
							}
						},
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 195931196245904,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "\"slash_\"&choose(1,2)",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "destroy",
							"objectClass": "leftSlash",
							"sid": 781775512838627
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 275409804990847,
							"parameters": {
								"seconds": "0.3"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 597152710153068,
							"parameters": {
								"variable": "midAttack",
								"value": "false"
							}
						}
					],
					"sid": 831944999747652
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 639444903810819,
							"parameters": {
								"key": 75
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 555843203781124,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"Dungeon\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 135473112700815,
							"parameters": {
								"variable": "midAttack"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 174251640078283,
							"parameters": {
								"variable": "midAttack",
								"value": "true"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 921876937989623,
							"parameters": {
								"object-to-create": "downSlash",
								"layer": "1",
								"x": "Player.X",
								"y": "Player.Y+25",
								"create-hierarchy": false
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 803737015585022,
							"parameters": {
								"seconds": "0.1"
							}
						},
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 480507071030754,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "\"slash_\"&choose(1,2)",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "destroy",
							"objectClass": "downSlash",
							"sid": 301025880200136
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 146175191186019,
							"parameters": {
								"seconds": "0.3"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 224598301785853,
							"parameters": {
								"variable": "midAttack",
								"value": "false"
							}
						}
					],
					"sid": 748254049892015
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 273654365831774,
							"parameters": {
								"key": 76
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 920585506784069,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"Dungeon\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 840770677168632,
							"parameters": {
								"variable": "midAttack"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 971868655649538,
							"parameters": {
								"variable": "midAttack",
								"value": "true"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 832151175148952,
							"parameters": {
								"object-to-create": "rightSlash",
								"layer": "1",
								"x": "Player.X+25",
								"y": "Player.Y",
								"create-hierarchy": false
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 565996263163631,
							"parameters": {
								"seconds": "0.1"
							}
						},
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 591708128111157,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "\"slash_\"&choose(1,2)",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "destroy",
							"objectClass": "rightSlash",
							"sid": 839788269483412
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 598141456485351,
							"parameters": {
								"seconds": "0.3"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 520656732402878,
							"parameters": {
								"variable": "midAttack",
								"value": "false"
							}
						}
					],
					"sid": 494997784520658
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-click",
							"objectClass": "Mouse",
							"sid": 134509053842585,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked"
							}
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 295766574094168,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"Dungeon\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 438485916571215,
							"parameters": {
								"variable": "midAttack"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 842285414351257,
							"parameters": {
								"variable": "attackAngle",
								"value": "angle(Player.ImagePointX(0), Player.ImagePointY(0), Mouse.X, Mouse.Y)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "temAngleText",
							"sid": 228734404681222,
							"parameters": {
								"text": "attackAngle"
							}
						}
					],
					"sid": 127040118572133,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 797327725333183,
									"parameters": {
										"variable": "attackAngle",
										"comparison": 3,
										"value": "45"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 765804595324909,
									"parameters": {
										"variable": "attackAngle",
										"comparison": 4,
										"value": "-45"
									}
								}
							],
							"actions": [],
							"sid": 492688118866028,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 418273344111777,
											"parameters": {
												"variable": "weaponMode",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 455864620261599,
											"parameters": {
												"variable": "midAttack",
												"value": "true"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 559487327945550,
											"parameters": {
												"object-to-create": "rightSlash",
												"layer": "1",
												"x": "Player.X+25",
												"y": "Player.Y",
												"create-hierarchy": false
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 646792326310718,
											"parameters": {
												"seconds": "0.1"
											}
										},
										{
											"id": "play-by-name",
											"objectClass": "Audio",
											"sid": 560698960013474,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "\"slash_\"&choose(1,2)",
												"loop": "not-looping",
												"volume": "0",
												"tag-optional": "\"\""
											}
										},
										{
											"id": "destroy",
											"objectClass": "rightSlash",
											"sid": 243771506714591
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 449109428127104,
											"parameters": {
												"seconds": "0.3"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 274977376153400,
											"parameters": {
												"variable": "midAttack",
												"value": "false"
											}
										}
									],
									"sid": 321713967006237
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 930483103013515,
											"parameters": {
												"variable": "weaponMode",
												"comparison": 0,
												"value": "1"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 527347033777498,
											"parameters": {
												"variable": "rangednum",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 259734506081550,
											"parameters": {
												"variable": "midAttack",
												"value": "true"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 869665698711332,
											"parameters": {
												"object-to-create": "rightArrow",
												"layer": "1",
												"x": "Player.X+25",
												"y": "Player.Y",
												"create-hierarchy": false
											}
										},
										{
											"id": "subtract-from-eventvar",
											"objectClass": "System",
											"sid": 562663284887369,
											"parameters": {
												"variable": "rangednum",
												"value": "1"
											}
										},
										{
											"id": "set-angle-of-motion",
											"objectClass": "rightArrow",
											"sid": 847558391952939,
											"behaviorType": "子弹",
											"parameters": {
												"angle": "0"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 510518010905701,
											"parameters": {
												"seconds": "0.1"
											}
										},
										{
											"id": "play-by-name",
											"objectClass": "Audio",
											"sid": 173875935663942,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "\"slash_\"&choose(1,2)",
												"loop": "not-looping",
												"volume": "0",
												"tag-optional": "\"\""
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 179340249150875,
											"parameters": {
												"seconds": "0.3"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 711374699770291,
											"parameters": {
												"variable": "midAttack",
												"value": "false"
											}
										}
									],
									"sid": 363838414723488
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 572907302870374,
									"parameters": {
										"variable": "attackAngle",
										"comparison": 3,
										"value": "135"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 775627037642159,
									"parameters": {
										"variable": "attackAngle",
										"comparison": 4,
										"value": "45"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 674013709503378,
									"parameters": {
										"variable": "midAttack",
										"value": "true"
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 569243672959557,
									"parameters": {
										"object-to-create": "downSlash",
										"layer": "1",
										"x": "Player.X",
										"y": "Player.Y+25",
										"create-hierarchy": false
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 216138806504246,
									"parameters": {
										"seconds": "0.1"
									}
								},
								{
									"id": "play-by-name",
									"objectClass": "Audio",
									"sid": 651488782909681,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "\"slash_\"&choose(1,2)",
										"loop": "not-looping",
										"volume": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"id": "destroy",
									"objectClass": "downSlash",
									"sid": 265886697775904
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 418849840254933,
									"parameters": {
										"seconds": "0.3"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 280258460098476,
									"parameters": {
										"variable": "midAttack",
										"value": "false"
									}
								}
							],
							"sid": 249068698376804
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 937095993921050,
									"parameters": {
										"variable": "attackAngle",
										"comparison": 3,
										"value": "-135"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 726997059987962,
									"parameters": {
										"variable": "attackAngle",
										"comparison": 4,
										"value": "135"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 144272385755416,
									"parameters": {
										"variable": "midAttack",
										"value": "true"
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 306950872530525,
									"parameters": {
										"object-to-create": "leftSlash",
										"layer": "1",
										"x": "Player.X-25",
										"y": "Player.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 195796756579923,
									"parameters": {
										"seconds": "0.1"
									}
								},
								{
									"id": "play-by-name",
									"objectClass": "Audio",
									"sid": 544128699548193,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "\"slash_\"&choose(1,2)",
										"loop": "not-looping",
										"volume": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"id": "destroy",
									"objectClass": "leftSlash",
									"sid": 994821616033692
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 643719418393420,
									"parameters": {
										"seconds": "0.3"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 355654755254081,
									"parameters": {
										"variable": "midAttack",
										"value": "false"
									}
								}
							],
							"sid": 814250556331296,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 312092014935023,
									"parameters": {
										"variable": "attackAngle",
										"comparison": 3,
										"value": "-45"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 618119923432354,
									"parameters": {
										"variable": "attackAngle",
										"comparison": 4,
										"value": "-135"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 346193774974689,
									"parameters": {
										"variable": "midAttack",
										"value": "true"
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 674552898588784,
									"parameters": {
										"object-to-create": "upSlash",
										"layer": "1",
										"x": "Player.X",
										"y": "Player.Y-25",
										"create-hierarchy": false
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 907983192731251,
									"parameters": {
										"seconds": "0.1"
									}
								},
								{
									"id": "play-by-name",
									"objectClass": "Audio",
									"sid": 136200001145666,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "\"slash_\"&choose(1,2)",
										"loop": "not-looping",
										"volume": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"id": "destroy",
									"objectClass": "upSlash",
									"sid": 917534757160942
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 828869150818041,
									"parameters": {
										"seconds": "0.3"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 840064612709591,
									"parameters": {
										"variable": "midAttack",
										"value": "false"
									}
								}
							],
							"sid": 457753945718859
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 130353458909177,
							"parameters": {
								"key": 81
							}
						}
					],
					"actions": [],
					"sid": 954512021823122,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 319290713562904,
									"parameters": {
										"variable": "weaponMode",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 516475851491698,
									"parameters": {
										"variable": "weaponMode",
										"value": "1"
									}
								}
							],
							"sid": 110339584732132
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 190242385938084
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 801012260217003,
									"parameters": {
										"variable": "weaponMode",
										"value": "0"
									}
								}
							],
							"sid": 218851953541332
						}
					]
				}
			],
			"sid": 746665832804429
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "PlayerMovement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 494558262935642,
							"parameters": {
								"key": 87
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 387128237631312,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "up"
							}
						},
						{
							"id": "simulate-control",
							"objectClass": "direction",
							"sid": 872648123713205,
							"behaviorType": "8方向",
							"parameters": {
								"control": "up"
							}
						}
					],
					"sid": 387753969660294
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 736918281888653,
							"parameters": {
								"key": 83
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 803709472040055,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "down"
							}
						},
						{
							"id": "simulate-control",
							"objectClass": "direction",
							"sid": 893677426005962,
							"behaviorType": "8方向",
							"parameters": {
								"control": "down"
							}
						}
					],
					"sid": 501052452653960
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 651311147132504,
							"parameters": {
								"key": 65
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 929535606971093,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "left"
							}
						},
						{
							"id": "simulate-control",
							"objectClass": "direction",
							"sid": 754456582650631,
							"behaviorType": "8方向",
							"parameters": {
								"control": "left"
							}
						}
					],
					"sid": 197640056093948
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 287822757267372,
							"parameters": {
								"key": 68
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 875537898688142,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "right"
							}
						},
						{
							"id": "simulate-control",
							"objectClass": "direction",
							"sid": 351121648399561,
							"behaviorType": "8方向",
							"parameters": {
								"control": "right"
							}
						}
					],
					"sid": 484872760371262
				}
			],
			"sid": 143208339756670
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "PlayerAnimation",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving",
							"objectClass": "direction",
							"sid": 312738433619955,
							"behaviorType": "8方向"
						}
					],
					"actions": [],
					"sid": 259194557928249,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-within-angle",
									"objectClass": "direction",
									"sid": 505980562111911,
									"parameters": {
										"within": "46",
										"angle": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Player",
									"sid": 985265995104255,
									"parameters": {
										"animation": "\"Animation 1\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-mirrored",
									"objectClass": "Player",
									"sid": 364266347120511,
									"parameters": {
										"state": "not-mirrored"
									}
								}
							],
							"sid": 728978377328891
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-within-angle",
									"objectClass": "direction",
									"sid": 178030489926808,
									"parameters": {
										"within": "46",
										"angle": "180"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Player",
									"sid": 163439730129188,
									"parameters": {
										"animation": "\"Animation 1\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-mirrored",
									"objectClass": "Player",
									"sid": 483069054112952,
									"parameters": {
										"state": "mirrored"
									}
								}
							],
							"sid": 515676476530141
						}
					]
				}
			],
			"sid": 620333301900732
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Merchant Events",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 580391366319151,
							"parameters": {
								"object": "merchCol"
							}
						},
						{
							"id": "collisions-enabled",
							"objectClass": "merchCol",
							"sid": 426767386430597
						}
					],
					"actions": [
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 762433203590831,
							"parameters": {
								"layer": "\"Shop Menu\"",
								"visibility": "visible"
							}
						}
					],
					"sid": 669435668780787
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "collisions-enabled",
							"objectClass": "merchCol",
							"sid": 472963596092730,
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 142388304823250,
							"parameters": {
								"layer": "\"Shop Menu\"",
								"visibility": "invisible"
							}
						}
					],
					"sid": 760614977293224
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-object-clicked",
							"objectClass": "Mouse",
							"sid": 588061400904073,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked",
								"object-clicked": "merchantText"
							}
						}
					],
					"actions": [],
					"sid": 779629116031571,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-text",
									"objectClass": "merchantText",
									"sid": 744336362161628,
									"parameters": {
										"text-to-compare": "\"exit\"",
										"case-sensitivity": "ignore-case"
									}
								}
							],
							"actions": [
								{
									"id": "set-collisions-enabled",
									"objectClass": "merchCol",
									"sid": 127911578943489,
									"parameters": {
										"collisions": "disabled"
									}
								}
							],
							"sid": 513156583405129
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-text",
									"objectClass": "merchantText",
									"sid": 144105873472176,
									"parameters": {
										"text-to-compare": "\"health potion\"",
										"case-sensitivity": "ignore-case"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 126439859035740,
									"parameters": {
										"variable": "gold",
										"comparison": 5,
										"value": "5"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 640276582658271,
									"parameters": {
										"variable": "lives",
										"comparison": 2,
										"value": "3"
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 315864731593060,
									"parameters": {
										"audio-file": "gold",
										"loop": "not-looping",
										"volume": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 189519355348921,
									"parameters": {
										"variable": "gold",
										"value": "5"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 373908669003409,
									"parameters": {
										"variable": "lives",
										"value": "1"
									}
								},
								{
									"id": "set-text",
									"objectClass": "goldCount",
									"sid": 338218014326060,
									"parameters": {
										"text": "gold"
									}
								},
								{
									"id": "set-text",
									"objectClass": "lifeCount",
									"sid": 352921268136775,
									"parameters": {
										"text": "lives"
									}
								}
							],
							"sid": 845131969672250
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-text",
									"objectClass": "merchantText",
									"sid": 307722170476265,
									"parameters": {
										"text-to-compare": "\"arrow\"",
										"case-sensitivity": "ignore-case"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 390707894266430,
									"parameters": {
										"variable": "gold",
										"comparison": 5,
										"value": "2"
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 146316027623284,
									"parameters": {
										"audio-file": "gold",
										"loop": "not-looping",
										"volume": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 957155415382896,
									"parameters": {
										"variable": "gold",
										"value": "2"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 771377371060343,
									"parameters": {
										"variable": "rangednum",
										"value": "1"
									}
								},
								{
									"id": "set-text",
									"objectClass": "goldCount",
									"sid": 474470511273985,
									"parameters": {
										"text": "gold"
									}
								}
							],
							"sid": 527044257195584
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-text",
									"objectClass": "merchantText",
									"sid": 163047918129159,
									"parameters": {
										"text-to-compare": "\"weapon upgrade\"",
										"case-sensitivity": "ignore-case"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 502002470290620,
									"parameters": {
										"variable": "gold",
										"comparison": 5,
										"value": "5*(weaponupgrade+1)"
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 997800975527260,
									"parameters": {
										"audio-file": "gold",
										"loop": "not-looping",
										"volume": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 738571600981489,
									"parameters": {
										"variable": "gold",
										"value": "5*(weaponupgrade+1)"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 876762735014212,
									"parameters": {
										"variable": "weaponupgrade",
										"value": "1"
									}
								},
								{
									"id": "set-text",
									"objectClass": "weaponPrice",
									"sid": 565342406233834,
									"parameters": {
										"text": "5*(weaponupgrade+1)&\"g\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "goldCount",
									"sid": 926920912512358,
									"parameters": {
										"text": "gold"
									}
								},
								{
									"id": "set-size",
									"objectClass": "upSlash",
									"sid": 734808690210768,
									"parameters": {
										"width": "upSlash.Width+10*weaponupgrade",
										"height": "upSlash.Height+10*weaponupgrade"
									}
								},
								{
									"id": "set-size",
									"objectClass": "downSlash",
									"sid": 951640120770498,
									"parameters": {
										"width": "downSlash.Width+10*weaponupgrade",
										"height": "downSlash.Height+10*weaponupgrade"
									}
								},
								{
									"id": "set-size",
									"objectClass": "leftSlash",
									"sid": 337511646148763,
									"parameters": {
										"width": "leftSlash.Width+10*weaponupgrade",
										"height": "leftSlash.Height+10*weaponupgrade"
									}
								},
								{
									"id": "set-size",
									"objectClass": "rightSlash",
									"sid": 651769018314400,
									"parameters": {
										"width": "rightSlash.Width+10*weaponupgrade",
										"height": "rightSlash.Height+10*weaponupgrade"
									}
								}
							],
							"sid": 588071538012162
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-text",
									"objectClass": "merchantText",
									"sid": 157407949262707,
									"parameters": {
										"text-to-compare": "\"speed upgrade\"",
										"case-sensitivity": "ignore-case"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 342052533351509,
									"parameters": {
										"variable": "gold",
										"comparison": 5,
										"value": "5*(speedupgrade+1)"
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 983750061720614,
									"parameters": {
										"audio-file": "gold",
										"loop": "not-looping",
										"volume": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 234451914309650,
									"parameters": {
										"variable": "gold",
										"value": "5*(speedupgrade+1)"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 563092236579430,
									"parameters": {
										"variable": "speedupgrade",
										"value": "1"
									}
								},
								{
									"id": "set-text",
									"objectClass": "speedPrice",
									"sid": 609642409437379,
									"parameters": {
										"text": "5*(speedupgrade+1)&\"g\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "goldCount",
									"sid": 123119699100744,
									"parameters": {
										"text": "gold"
									}
								},
								{
									"id": "set-max-speed",
									"objectClass": "Player",
									"sid": 335086736953582,
									"behaviorType": "8Direction",
									"parameters": {
										"max-speed": "Player.8Direction.MaxSpeed+50"
									}
								}
							],
							"sid": 615595360102698
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "Mouse",
							"sid": 192405999154350,
							"parameters": {
								"object": "merchantText"
							}
						}
					],
					"actions": [],
					"sid": 547423119504725,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "merchantText",
									"sid": 344668772209394,
									"parameters": {
										"instance-variable": "ID",
										"comparison": 0,
										"value": "\"itemText\""
									}
								}
							],
							"actions": [
								{
									"id": "set-default-color",
									"objectClass": "merchantText",
									"sid": 329592252446330,
									"parameters": {
										"color": "rgbEx(153, 0, 0)"
									}
								}
							],
							"sid": 566765202523113
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 263287328867213
						}
					],
					"actions": [
						{
							"id": "set-default-color",
							"objectClass": "merchantText",
							"sid": 501005200500086,
							"parameters": {
								"color": "rgbEx(255,255,255)"
							}
						}
					],
					"sid": 791345430639886
				}
			],
			"sid": 185756921120835
		}
	],
	"sid": 194649752755144
}